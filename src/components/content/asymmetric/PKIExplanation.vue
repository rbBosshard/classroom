<template>
  <section class="mb-12">
    <div class="bg-green-50 border-2 border-green-400 rounded-lg p-6">
      <h2 class="text-3xl font-bold text-green-800 mb-4">
        âœ… Die LÃ¶sung: Public Key Infrastruktur (PKI)
      </h2>

      <!-- Die Ausgangslage -->
      <div class="bg-blue-50 border-2 border-blue-300 rounded-lg p-5 mb-6">
        <h3 class="text-xl font-semibold text-blue-900 mb-3">ğŸ­ Die Ausgangslage</h3>
        <div class="space-y-3">
          <div class="flex items-start gap-3">
            <div class="text-2xl">ğŸ‘©â€ğŸ’»</div>
            <p class="text-blue-800">
              <strong>Alice</strong> ist eine Nutzerin, die mit ihrem Browser (z.B. Chrome, Firefox,
              Safari, Edge) sicher auf ihr E-Banking zugreifen mÃ¶chte.
            </p>
          </div>
          <div class="flex items-start gap-3">
            <div class="text-2xl">ğŸ¦</div>
            <p class="text-blue-800">
              <strong>Bob</strong> ist der Server von ubs.com, auf dem das E-Banking lÃ¤uft.
            </p>
          </div>
          <div class="flex items-start gap-3">
            <div class="text-2xl">â“</div>
            <p class="text-blue-800">
              <strong>Problem:</strong> Wie kann Alice sicher sein, dass der Ã¶ffentliche SchlÃ¼ssel,
              den sie vom UBS-Server erhÃ¤lt, wirklich zu UBS gehÃ¶rt und nicht von einem Angreifer
              stammt?
            </p>
          </div>
        </div>
      </div>

      <div class="bg-white rounded-lg p-6 shadow-lg mb-6">
        <h3 class="text-2xl font-semibold text-green-900 mb-4">ğŸ—ï¸ Wie funktioniert PKI?</h3>
        <!-- PKI -->
        <div class="mb-4 bg-white rounded-lg p-5 shadow-md border-l-4 border-blue-500">
          <div class="flex items-start gap-3 mb-3">
            <div class="text-3xl">ğŸ›ï¸</div>
            <h3 class="text-xl font-semibold text-blue-900">
              Kurzversion: Public Key Infrastruktur (PKI) - Vertrauen
            </h3>
          </div>
          <div class="text-sm space-y-3 text-gray-800">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
              <div class="bg-blue-50 rounded p-3">
                <p class="font-semibold text-blue-900 mb-1">Certificate Authorities (CAs)</p>
                <p class="text-xs text-blue-800">
                  VertrauenswÃ¼rdige Stellen (wie Trent), die IdentitÃ¤ten bestÃ¤tigen
                </p>
              </div>
              <div class="bg-blue-50 rounded p-3">
                <p class="font-semibold text-blue-900 mb-1">Zertifikate</p>
                <p class="text-xs text-blue-800">
                  Verbinden Ã¶ffentliche SchlÃ¼ssel mit IdentitÃ¤ten (von CA signiert)
                </p>
              </div>
              <div class="bg-blue-50 rounded p-3">
                <p class="font-semibold text-blue-900 mb-1">Root of Trust</p>
                <p class="text-xs text-blue-800">
                  Root-CA-Zertifikate sind in Browser/OS vorinstalliert
                </p>
              </div>
            </div>
            <div class="bg-blue-100 rounded p-3">
              <p class="text-blue-800 font-semibold">âœ… Verhindert Man-in-the-Middle-Angriffe</p>
              <p class="text-xs text-blue-700 mt-1">
                Angreifer kÃ¶nnen keine gÃ¼ltigen Zertifikate fÃ¤lschen
              </p>
            </div>
          </div>
        </div>

        <!-- Analogie zu herkÃ¶mmlichen Zertifikaten -->
        <CertificateAnalogy />

        <div class="space-y-5">
          <h3 class="text-xl font-semibold text-green-800 mt-8">
            Schritt-fÃ¼r-Schritt ErklÃ¤rung der PKI mit Beispiel
          </h3>
          <!-- Schritt 1 -->
          <div class="bg-green-50 rounded-lg p-5 border-l-4 border-green-500">
            <div class="flex items-start gap-3">
              <div class="text-2xl font-bold text-green-700 min-w-[2rem]">1ï¸âƒ£</div>
              <div class="flex-1">
                <h4 class="text-lg font-semibold text-green-900 mb-2">Zertifikat erhalten</h4>
                <p class="text-green-800 mb-3">
                  Bob (der Betreiber des UBS-Servers ubs.com) geht zu einer
                  <strong>vertrauenswÃ¼rdigen dritten Stelle</strong>. Im Internet heissen diese
                  <strong>Zertifizierungsstellen</strong> oder auf Englisch:
                  <strong>Certificate Authorities (CAs)</strong> (z.B. Let's Encrypt, SwissSign,
                  DigiCert). Die CA Ã¼berprÃ¼ft Bobs IdentitÃ¤t und stellt ein
                  <strong>digitales Zertifikat</strong> aus.
                </p>
                <details class="mt-3">
                  <summary class="cursor-pointer text-blue-700 font-semibold hover:underline">
                    ğŸ“„ Was enthÃ¤lt ein Zertifikat?
                  </summary>
                  <div class="mt-3 bg-white rounded-lg p-4 shadow-sm">
                    <ul class="list-disc pl-6 space-y-2 text-green-800 text-sm">
                      <li>Bobs Ã¶ffentlicher SchlÃ¼ssel</li>
                      <li>Bobs IdentitÃ¤t (Name, Domain, Organisation)</li>
                      <li>GÃ¼ltigkeitsdauer (von wann bis wann)</li>
                      <li>Weitere Metadaten</li>
                      <li>
                        <strong class="text-green-900"> Digitale Signatur der CA! </strong>
                      </li>
                    </ul>
                  </div>
                </details>
              </div>
            </div>
          </div>

          <!-- Schritt 2 -->
          <div class="bg-green-50 rounded-lg p-5 border-l-4 border-green-500">
            <div class="flex items-start gap-3">
              <div class="text-2xl font-bold text-green-700 min-w-[2rem]">2ï¸âƒ£</div>
              <div class="flex-1">
                <h4 class="text-lg font-semibold text-green-900 mb-2">Zertifikat weitergeben</h4>
                <p class="text-green-800">
                  Wenn Alice mit ihrem Browser ubs.com besucht, schickt Bob (der UBS-Server) nicht
                  nur seinen Ã¶ffentlichen SchlÃ¼ssel, sondern sein
                  <strong>Zertifikat</strong> (das von der CA signiert wurde) an Alice's Browser.
                </p>
              </div>
            </div>
          </div>

          <!-- Schritt 3 -->
          <div class="bg-green-50 rounded-lg p-5 border-l-4 border-green-500">
            <div class="flex items-start gap-3">
              <div class="text-2xl font-bold text-green-700 min-w-[2rem]">3ï¸âƒ£</div>
              <div class="flex-1">
                <h4 class="text-lg font-semibold text-green-900 mb-2">Zertifikat verifizieren</h4>
                <p class="text-green-800 mb-3">
                  Alice's Browser prÃ¼ft automatisch die <strong>CA-Signatur</strong> auf dem
                  Zertifikat mit dem <strong>Ã¶ffentlichen SchlÃ¼ssel der CA</strong>.
                </p>
                <details class="mt-3">
                  <summary class="cursor-pointer text-blue-700 font-semibold hover:underline">
                    ğŸ”‘ Woher hat Alice's Browser den Ã¶ffentlichen SchlÃ¼ssel der CA?
                  </summary>
                  <div class="mt-3 bg-white rounded-lg p-4 shadow-sm">
                    <p class="text-green-800 mb-2">
                      CAs sind <strong>Root-CAs</strong>, deren Ã¶ffentliche SchlÃ¼ssel bereits in
                      deinem Browser/Betriebssystem vorinstalliert sind! Dies nennt man
                      <strong>"Root of Trust"</strong>.
                    </p>
                    <p class="text-sm italic text-green-700 mt-3">
                      ğŸ’¡ Tipp: In deinem Browser kannst du unter Einstellungen â†’ Sicherheit â†’
                      Zertifikate alle vertrauenswÃ¼rdigen CAs anschauen!
                    </p>
                  </div>
                </details>
              </div>
            </div>
          </div>

          <!-- Ergebnis -->
          <div class="bg-green-100 rounded-lg p-5 border-l-4 border-green-600">
            <div class="flex items-start gap-3">
              <div class="text-2xl min-w-[2rem]">âœ…</div>
              <div class="flex-1">
                <h4 class="text-lg font-semibold text-green-900 mb-2">Ergebnis</h4>
                <p class="text-green-800 mb-2">
                  Wenn die CA-Signatur gÃ¼ltig ist, weiss Alice's Browser:
                  <strong>Dieser Ã¶ffentliche SchlÃ¼ssel gehÃ¶rt wirklich zum UBS-Server!</strong>
                  Alice kann nun sicher mit ubs.com kommunizieren.
                </p>
              </div>
            </div>
          </div>
          <!-- VerstÃ¤ndnisfrage nach Schritt 3 -->
          <div class="bg-yellow-50 border-2 border-yellow-400 rounded-lg p-4 my-4">
            <p class="font-semibold text-yellow-900 mb-2">ğŸ¤” VerstÃ¤ndnisfrage:</p>
            <p class="text-yellow-800 mb-2">
              Was wÃ¼rde passieren, wenn Mallory versucht, ein gefÃ¤lschtes Zertifikat mit ihrem
              eigenen SchlÃ¼ssel zu erstellen?
            </p>
            <details>
              <summary class="cursor-pointer text-blue-600 text-sm hover:text-blue-800">
                ğŸ’¡ Antwort anzeigen
              </summary>
              <p class="mt-2 text-yellow-800 text-sm">
                Mallory kann das Zertifikat nicht mit der CA-Signatur versehen, weil Mallory den
                privaten SchlÃ¼ssel der CA nicht besitzt. Der Browser wÃ¼rde die fehlende oder
                ungÃ¼ltige Signatur erkennen und eine Warnung anzeigen.
              </p>
            </details>
          </div>
        </div>
      </div>

      <!-- Vertrauenskette -->
      <div class="bg-blue-50 rounded-lg p-6 shadow-lg">
        <h3 class="text-xl font-semibold text-blue-900 mb-4">
          ğŸ”— Die Vertrauenskette (Chain of Trust)
        </h3>
        <p class="text-blue-800 mb-4">
          In der Praxis gibt es oft mehrere Ebenen von Zertifizierungsstellen:
        </p>
        <div class="bg-white rounded-lg p-4">
          <div class="flex flex-col gap-2">
            <div class="flex items-center gap-3 p-3 bg-blue-50 rounded">
              <div class="text-2xl">ğŸ›ï¸</div>
              <div>
                <strong class="text-blue-900">Root CA:</strong>
                <span class="text-blue-800 text-sm">
                  HÃ¶chste Vertrauensebene, vorinstalliert im Browser/OS
                </span>
              </div>
            </div>
            <div class="flex justify-center text-blue-400 text-2xl">â†“</div>
            <div class="flex items-center gap-3 p-3 bg-blue-50 rounded">
              <div class="text-2xl">ğŸ¢</div>
              <div>
                <strong class="text-blue-900">Intermediate CA:</strong>
                <span class="text-blue-800 text-sm"> Zwischenebene, von Root CA signiert </span>
              </div>
            </div>
            <div class="flex justify-center text-blue-400 text-2xl">â†“</div>
            <div class="flex items-center gap-3 p-3 bg-blue-50 rounded">
              <div class="text-2xl">ğŸŒ</div>
              <div>
                <strong class="text-blue-900">Server-Zertifikat:</strong>
                <span class="text-blue-800 text-sm">
                  FÃ¼r spezifische Website, von Intermediate CA signiert
                </span>
              </div>
            </div>
          </div>
        </div>
        <p class="text-blue-700 text-md mt-4 italic">
          Diese Hierarchie ermÃ¶glicht es, das Root-CA-Zertifikat sicher offline zu halten, wÃ¤hrend
          Intermediate CAs die tÃ¤gliche Arbeit erledigen.
        </p>
      </div>
    </div>
    <!-- Quiz-Fragen zum PKI-Konzept -->
    <div class="bg-yellow-50 border-2 border-yellow-400 rounded-lg p-5 mt-6">
      <h3 class="text-xl font-semibold text-yellow-900 mb-4 flex items-center gap-2">
        <span>âœ…</span>
        <span>VerstÃ¤ndnis-Check PKI:</span>
      </h3>
      <div class="space-y-4">
        <div class="bg-white rounded-lg p-4">
          <p class="font-semibold text-yellow-900 mb-2">
            1. Was ist die Hauptaufgabe einer Certificate Authority (CA)?
          </p>
          <details class="mt-2">
            <summary class="cursor-pointer text-blue-600 text-sm hover:text-blue-800">
              ğŸ’¡ Antwort anzeigen
            </summary>
            <p class="mt-2 text-yellow-800 text-sm">
              Die CA Ã¼berprÃ¼ft die IdentitÃ¤t eines Servers/einer Person und bestÃ¤tigt durch ihre
              digitale Signatur: "Dieser Ã¶ffentliche SchlÃ¼ssel gehÃ¶rt wirklich zu dieser
              Domain/Person."
            </p>
          </details>
        </div>

        <div class="bg-white rounded-lg p-4">
          <p class="font-semibold text-yellow-900 mb-2">
            2. Warum ist die Vertrauenskette (Chain of Trust) wichtig?
          </p>
          <details class="mt-2">
            <summary class="cursor-pointer text-blue-600 text-sm hover:text-blue-800">
              ğŸ’¡ Antwort anzeigen
            </summary>
            <p class="mt-2 text-yellow-800 text-sm">
              Sie ermÃ¶glicht es, das Root-CA-Zertifikat (hÃ¶chste Vertrauensebene) sicher offline zu
              halten, wÃ¤hrend Intermediate CAs die tÃ¤glichen Zertifikate ausstellen. Dies erhÃ¶ht die
              Sicherheit.
            </p>
          </details>
        </div>

        <div class="bg-white rounded-lg p-4">
          <p class="font-semibold text-yellow-900 mb-2">3. Mini-Szenario: Was passiert hier?</p>
          <p class="text-yellow-800 text-sm mb-2">
            Du besuchst "ubs.com", aber dein Browser zeigt eine Warnung: "Zertifikat nicht
            vertrauenswÃ¼rdig". Welche mÃ¶glichen GrÃ¼nde gibt es?
          </p>
          <details class="mt-2">
            <summary class="cursor-pointer text-blue-600 text-sm hover:text-blue-800">
              ğŸ’¡ MÃ¶gliche GrÃ¼nde anzeigen
            </summary>
            <div class="mt-2 text-yellow-800 text-sm space-y-1">
              <p>â€¢ Zertifikat ist abgelaufen</p>
              <p>â€¢ Zertifikat wurde von einer unbekannten CA ausgestellt</p>
              <p>â€¢ Man-in-the-Middle-Angriff (jemand gibt sich als UBS aus)</p>
              <p>â€¢ Zertifikat wurde fÃ¼r eine andere Domain ausgestellt</p>
            </div>
          </details>
        </div>

        <div class="bg-white rounded-lg p-4">
          <p class="font-semibold text-yellow-900 mb-2">4. Root of Trust</p>
          <p class="text-yellow-700 text-sm italic">
            Was wÃ¤re, wenn jemand den privaten SchlÃ¼ssel einer Root-CA stehlen wÃ¼rde? Welche Folgen
            hÃ¤tte das?
          </p>
          <details class="mt-2">
            <summary class="cursor-pointer text-blue-600 text-sm hover:text-blue-800">
              ğŸ’¡ Diskussionsgrundlage anzeigen
            </summary>
            <p class="mt-2 text-yellow-800 text-sm">
              Der Angreifer kÃ¶nnte beliebige gefÃ¤lschte Zertifikate ausstellen, die von allen
              Browsern als vertrauenswÃ¼rdig akzeptiert wÃ¼rden. Dies wÃ¤re eine Katastrophe fÃ¼r die
              Internet-Sicherheit! Deshalb werden Root-CAs meist offline gehalten (vorinstalliert im
              Browser oder Betriebssystem) und sind extrem geschÃ¼tzt.
            </p>
          </details>
        </div>
      </div>
    </div>
  </section>
</template>

<script setup lang="ts">
import CertificateAnalogy from './CertificateAnalogy.vue';
</script>
